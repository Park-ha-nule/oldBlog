---
layout: post
title:  트랜잭션이란?
date:   2020-03-19 22:57:00 +0000
description: 트랜잭션 설명, 특징, transaction script
img: transaction.png
tags: [More]
author: begginer_
---

# Transaction이란?
<br><br><br>
- 트랜잭션이란?
<br>
    트랜잭션이란, 데이터베이스의 상태를 변화시키기 위해 수행하는 작업의 단위를 뜻한다.
<br>
    여기서 데이터베이스의 상태를 변화시킨다는 것은 무얼 의미하는가?
<br>
    간단하게 말해서 질의어(SQL)을 이용하는 데이터베이스를 접근하는 것을 의미한다.
<br>
    - Select
<br>
    - Insert
<br>
    - Delete
<br>
    - Update
<br>
<br>
      주의해야할 점은 작업의 단위는 질의어 한 문장이 아니라는 점
<br>
    작업단위는 많은 질이의 명령문들을 사람이 정하는 기준에 따라 정하는 것을 의미한다.
<br>
    쉽게 예를 들자면, 게시글을 작성하는 사용자가 있다. 이 사용자는 게시글을 작성하고, 올리기 버튼을 누른다. 그 후에 다시 게시판에 돌아왔을 때, 게시판은 자신의 글이 포함된 업데이트된 게시판을 보게 된다.
<br>
     이러한 상황을 데이터베이스 작업으로 옮기면, 사용자가 올리기 버튼을 눌렀을 때, insert문을 사용하여 사용자가 입력한 게시글의 데이터를 옮긴다. 그 후에, 게시판을 구성할 데이터를 다시 select하여 최신정보로 유지한다. 
<br>
     여기서 작업의 단위는 insert문과 select문을 합친거다. **이러한 작업단위를 하나의 트랜잭션이라고 한다.** 관리자나 개발자가 하나의 트랜잭션 설계를 잘하는 것이 데이터를 다루는 것에 많은 이점이 있다.
<br>
- 트랜잭션의 특징
<br>
    1. 원자성(Atomicity)
<br>
    : 트랜잭션이 데이터베이스에 모두 반연되던가, 아니면 전혀 반영되지 않아야 한다.
<br>
    2. 일관성(Consistency)
<br>
    : 트랜잭션의 작업 처리 결과가 항상 일관성이 있어야한다.
<br>
    트랜잭션이 진행되는 동안에 데이터베이스가 변경 되더라도 업데이트된 데이터베이스로 트랜잭션이 진행되는 것이 아니라, 처음에 트랜잭션을 진행 하기 위해 참조한 데이터베이스로 진행된다.
<br>
    3. 독립성(Isolation)
<br>
    : 둘 이상의 트랜잭션이 동시에 병행 실행되고 있을 경우에 어느 하나의 트랜잭션이라도 다른 트랜잭션의 연산을 끼어들 수 없다.
<br>
    하나의 특정 트랜잭션이 완료될때까지, 다른 트랜잭션이 특정 트랜잭션의 결과를 참조할 수 없다.
<br>
    4. 지속성(Durability)
<br>
    : 트랜잭션이 성공적으로 완료되었을경우, 결과는 영구적으로 반영되어야 한다는 점이다.
<br>
- 트랜잭션의 Commit, Rollback 연산
<br>
<br>
    Commit이란 하나의 트랜잭션이 성공적으로 끝났고, 데이터베이스가 일관성있는 상태에 있을 때, 하나의 트랜잭션이 끝났다는 것을 알려주는 연산이다. 이 연산을 사용하면 수행했던 트랜잭션이 로그에 저장되며, 후에 Rollback 연산을 수행했었던 트랜잭션단위로 하는 것을 도와준다.
<br>
     Rollback이란 하나의 트랜잭션 처리가 비정상적으로 종료되어 트랜잭션의 원자성이 깨진 경우, 트랜잭션을 처음부터 다시 시작하거나 트랜잭션의 부분적으로만 연산된 결과를 다시 취소시킨다.
<br>
     후에 사용자가 트랜잭션 처리된 단위데로 Rollback을 진행할 수도 있다.
<br>
- transaction script란?
<br>
     은행의 계좌 이체 서비스처럼 하나의 트랜잭션 안에서 필요한 모든 로직을 수행하는 패턴이다. 
<br>
     즉, function의 책임 소재를 어디에 두는가, 사용자가 작성하는 코드 로직에 두는가(Transaction Script)아니면 객체 자체의 모델링 자체에 두는가(Domain Model)의 차이이다.
<br>